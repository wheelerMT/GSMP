@startuml L4_Class Diagram - Variable
'https://plantuml.com/class-diagram

' Class definitions
class C_API_ModelVariableManager <<C API>> {
    .. Manager Instantiation ..
    GSMP_API GSMP_VariableManager_Create(GSMP_VariableManager *manager)
    GSMP_API GSMP_VariableManager_Destroy(GSMP_VariableManager *manager)

    .. Variable Instantiation ..
    GSMP_API GSMP_VariableManager_CreateVariable(GSMP_VariableManager *manager, char *name, ...)
    GSMP_API GSMP_VariableManager_DestroyVariable(GSMP_VariableManager *manager, char *name)

    .. Variables ..
    GSMP_API GSMP_VariableManager_GetVariableType(GSMP_VariableManager *manager, char *name, int *type)
    GSMP_API GSMP_VariableManager_GetVariableDescription(GSMP_VariableManager *manager, char *name, char *description)
    GSMP_API GSMP_VariableManager_GetVariableSize(GSMP_VariableManager *manager, char *name, int *size, int* sizeLength)
    GSMP_API GSMP_VariableManager_GetVariableIntent(GSMP_VariableManager *manager, char *name, int *intent)
    GSMP_API GSMP_VariableManager_SetVariable_Int(GSMP_VariableManager *manager, char *name, int *value)
    ..  . . .  ..
    GSMP_API GSMP_Model_GetVariable_Int(char *name, int *value)
    ..  . . .  ..
}

class VariableManager <<namespace::GSMP>> {
  + List<Variable> Variable

  .. Instantiation ..
  + Add
  +

  + GSMP_ReturnCode GetVariableType(string name, GSMP_VariableType type)
  + GSMP_ReturnCode GetVariableDescription(string name, string description)
  + GSMP_ReturnCode GetVariableSize(string name, list<int> size)
  + GSMP_ReturnCode GetVariableIntent(string name, GSMP_VariableIntent intent)
  + GSMP_ReturnCode GetVariable(string name, ...???...)
  + GSMP_ReturnCode SetVariable(string name, ...???...)
}

class Variable<T> {
  String Name
  String Description
  Type Type
  VariableIntent Intent
  T DefaultValue
  List<int> Dimensions
}

' Notes
note right of Variable::Type
  This is inferred from T
end note

note right of Variable::DefaultValue
  This needs to be defined with generics
  to ensure it works with all types.
end note

note left of Variable::Dimensions
  Each element of the list specifies a dimension,
  which get appended to the list when the variable
  is registered.
  
  E.g., a list of [2, 3, 4] implies this variable is a
  2x3x4 matrix.
end note

' Relationships

' Define C Relationships (including Cpp components)
C_API_ModelVariableManager ..> VariableManager : calls instance
VariableManager *-- Variable
Variable *-- GSMP_VariableIntent
Variable *-- GSMP_VariableType
Variable *-- GSMP_ReturnCode

' -- Enumerated Type Definitions --
enum GSMP_VariableIntent {
    Undefined
    Input
    Output
    Override
}

enum GSMP_VariableType {
    GSMP_double [double]
    GSMP_single [float]
    GSMP_byte [int8_t]
    GSMP_unsignedByte [uint8_t]
    GSMP_short [int16_t]
    GSMP_unsignedShort [uint16_t]
    GSMP_int [int32_t]
    GSMP_unsignedInt [uint32_t]
    GSMP_long [int64_t]
    GSMP_unsignedLong [uint64_t]
    GSMP_boolean [bool]
    GSMP_string [char*]
}

enum GSMP_ReturnCode {
    GSMP_ERROR = -1
    GSMP_OK = 0
    GSMP_PENDING = 1
}

@enduml